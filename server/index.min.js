'use strict';const express=require("express"),app=express(),PORT=4001,http=require("http").createServer(app),cors=require("cors");app.use(cors());app.get("/api",(b,a)=>{a.json({message:"Hello world"})});app.get("/",(b,a)=>{a.send("<h1>Hello world</h1>")});http.listen(PORT,()=>{console.log(`Server listening on ${PORT}`)});const socketIO=require("socket.io")(http,{cors:{origin:"http://localhost:3000"}});let users=[];
socketIO.on("connection",b=>{console.log(`\u26a1: ${b.id} user just connected!`);b.on("message",a=>{socketIO.emit("messageResponse",a)});b.on("newUser",a=>{users.push(a);socketIO.emit("newUserResponse",users)});b.on("typing",a=>{b.broadcast.emit("typingResponse",a)});b.on("disconnect",()=>{console.log("\ud83d\udd25: A user disconnected")})});